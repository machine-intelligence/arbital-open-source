{{/* question.tmpl is the main body of the question page */}}
{{define "base"}}
<!DOCTYPE html>
<html lang="en" ng-app>
<head>
	{{template "style"}}
	<link href="/static/css/question.css" rel="stylesheet">
	{{template "scripts"}}
	<script src="/static/js/question.js"></script>
</head>

<body>
{{template "navbar" .User}}

{{with .Question}}
	<div class="bQuestion" question-id="{{.Id}}">
		<div class="questionBody">
			<p>{{if IsUpdated .CreatorId .UpdatedAt}}(U){{end}}<span class="questionText">{{.Text}}</span></p>
			{{range .Tags}}
				<span class="tag">{{.Text}}</span>
			{{end}}
			<a href="#" class="subscribeToQuestion" {{if .IsSubscribed}}style="display:none"{{end}}>Subscribe</a>
			<a href="#" class="unsubscribeToQuestion" {{if not .IsSubscribed}}style="display:none"{{end}}>Unsubscribe</a>
			{{if IsAdmin}} <!--TODO: another condition -->
				<a href="#" class="editQuestion">Edit</a>
			{{end}}
			{{if IsAdmin}}
				<p class="admin">asked by {{.CreatorName}}</p>
			{{end}}
		</div>
		<form class="editQuestionForm">
			<input type="text" name="text" class="inputQuestion"></br>
			<p class="errorText"></p>
			<img src="/static/images/loading.gif" class="loadingIndicator"/>
			<input type="submit" value="Save"/>
			<a href="#" class="cancelLink cancelQuestion">Cancel</a>
		</form>
	</div>
{{end}}

<div class="bPriors">
	{{range .Priors}}
		<div class="inputColumn">
			{{template "input" .}}
		</div>
	{{end}}
	{{if .Question.PriorVote}}
		<p style="font-size:15px">You voted: {{.Question.PriorVote.Value}}</p>
	{{end}}
</div>

<div class="bInput">
	{{range .Inputs}}
		{{template "input" .}}
	{{end}}
	{{if IsLoggedIn}}
		<a href="#" class="newInputLink">New Input</a>
		<form class="newInputForm">
			<textarea name="text" class="newInputTextarea"></textarea>
			<p>URL: <input type="url" name="url"/></p>
			<p class="errorText"></p>
			<img src="/static/images/loading.gif" class="loadingIndicator"/>
			<input type="submit" value="Submit">
			<a href="#" class="cancelLink cancelNewInput">Cancel</a>
		</form>
	{{end}}
</div>

</body>
</html>
{{end}}
