{{/* groupsPage.tmpl contains templates to show the "My Groups" page */}}
{{define "base"}}
<!DOCTYPE html>
<html>
<head>
	{{template "style"}}
	<link href="/static/css/compiled/page.css" rel="stylesheet">
	{{template "scripts"}}
	<script src="/static/js/groupsPage.js"></script>
	<title>My Groups - Zanaduu</title>
</head>

<body>
{{template "navbar" .User}}

<div class="filter-body-div">
	{{range .Groups}}
		<div class="panel panel-default">
			<div class="panel-heading">
				<h3 class="panel-title">{{.Name}}</h3>
			</div>

			<!-- Members table -->
			<table class="table">
			  <tr>
					<td><b>Name</b></td>
					<td><b>Add Members</b></td>
					<td><b>Group Admin</b></td>
				</tr>
				{{range .Members}}
					<tr>
						<td>{{.FirstName}} {{.LastName}}</td>
						<td>
							{{if .CanAddMembers}}
								<span class="glyphicon glyphicon-ok"></span>
							{{end}}
						</td>
						<td>
							{{if .CanAdmin}}
								<span class="glyphicon glyphicon-ok"></span>
							{{end}}
						</td>
					</tr>
				{{end}}
		  </table>

		<!-- New Member form -->
		{{if .UserMember.CanAddMembers}}
			<div class="panel-body">
			<form class="new-member-form form-inline" group-name="{{.Name}}">
				<div class="form-group">
					<input name="userId" type="text" class="form-control" placeholder="New Member Id">
				</div>
				<img src="/static/images/loading.gif" class="loading-indicator" toggle-on-submit/>
				<button type="submit" class="btn btn-primary" toggle-on-submit>Add Member</button>
				<div class="submit-form-error alert alert-danger" hidden></div>
			</form>
			</div>
		{{end}}
		</div>
	{{end}}

	<!-- Create new group -->
	<br><br>
	<div class="panel panel-success" {{if lt .User.Karma 200}}hidden{{end}}>
		<div class="panel-heading">
			<h3 class="panel-title">New Group</h3>
		</div>
		<div class="panel-body">
			<form id="new-group-form" class="form-inline">
				<div class="form-group">
					<label>Name</label>
					<input name="name" type="text" class="form-control" placeholder="Group name">
				</div>
				<img src="/static/images/loading.gif" class="loading-indicator" toggle-on-submit/>
				<button type="submit" class="btn btn-primary" toggle-on-submit>Create Group</button>
				<div class="submit-form-error alert alert-danger" hidden></div>
			</form>
		</div>
	</div>
</div>

{{template "footer"}}
</body>
</html>
{{end}}
