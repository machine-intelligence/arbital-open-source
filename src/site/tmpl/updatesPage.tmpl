{{/* updates.tmpl shows updates for the logged in user */}}
{{define "base"}}
<!DOCTYPE html>
<html>
<head>
	{{template "style"}}
	{{template "scripts"}}
	<title>Zanaduu Updates</title>
</head>

<body>

{{template "navbar" .User}}

<div class="updates-body-div">
	{{range .UpdatedPages}}
		<div class="panel panel-default">
			<div class="panel-heading">
		    <a href="{{GetPageUrl .Page}}" class="update-page-summary-link panel-title">{{template "title" .Page}}</a>
		  </div>
			<div class="panel-body">
				{{range $k, $v := .Updates}}
					{{if eq $k "topLevelComment"}}
						{{$v.Count}} new top level comments.
					{{else if eq $k "reply"}}
						{{$v.Count}} new replies.
					{{else if eq $k "pageEdit"}}
						This page has been edited.
					{{else if eq $k "newPageByUser"}}
						This new page was created by {{template "userName" $v.FromUser}}.
					{{else if eq $k "newChildPage"}}
						This new page was created as a child of {{template "tag" $v.FromPage}}.
					{{else if eq $k "commentEdit"}}
						This page has some edited comments.
					{{end}}
					<br>
				{{end}}
			</div>
		</div>
	{{else}}
		<p class="alert alert-info">No new updates</p>
	{{end}}
</div>

{{template "footer"}}
</body>
</html>
{{end}}
