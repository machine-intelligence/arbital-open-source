<form class="new-page-form">

	<!-- Alerts -->
	<div class="alerts">
		<div ng-switch="page.getEditLevel()">
			<div ng-switch-when="admin" class="alert alert-warning">Enforcing admin priviledges.</div>
			<div ng-switch-when="blog" class="alert alert-danger" role="alert">Can't edit a blog page you didn't create.</div>
			<div ng-switch-when="" hidden></div>
			<div ng-switch-default class="alert alert-danger" role="alert">You don't have enough karma to edit this page. Required: {[{page.getEditLevel()}]}.</div>
		</div>
		<div ng-show="page.WasPublished">
			<div ng-show="page.IsAutosave" class="alert alert-warning">
				Restored autosave which was last updated on <span class="date" ng-bind="page.CreatedAt"></span>.
				<a ng-href="{[{page.EditUrl}]}?ignoreMySaves=1">Delete my autosave and edit live version.</a>
			</div>
			<div ng-show="page.IsSnapshot" class="alert alert-warning">
				Restored snapshot which was last updated on <span class="date" ng-bind="page.CreatedAt"></span>.
				<a ng-href="{[{page.EditUrl}]}?ignoreMySaves=1">Switch to editing the live version.</a>
			</div>
		</div>
	</div>

	<div class="edit-page-body">
		<div ng-class="{'half': !useVerticalView}">
			<!-- Title -->
			<div class="page-title">
				<input name="title" type="text" class="form-control input-lg" ng-value="page.Title" placeholder="{[{getTitlePlaceholder()}]}" required="true" autocomplete="off">
			</div>
	
			<!-- WMD edit panel -->
			<div class="wmd-panel-container">
				<div class="wmd-panel">
					<div id="wmd-button-bar{[{page.PageId}]}"></div>
					<textarea name="text"
							class="edit-page-text wmd-input form-control"
							id="wmd-input{[{page.PageId}]}"
							rows="30"
							placeholder="Truth is singular. Its &#34;versions&#34; are mistruths.&#13;&#10;&mdash; Sonmi-451"
						  style="resize: none;"
						  ng-bind="page.Text"></textarea>
					<div class="wmd-panel-bottom-buttons">
						<img src="/static/images/loading.gif" class="loading-indicator" toggle-on-submit/>
						<button type="button" class="save-snapshot-button btn btn-default" toggle-on-submit>Save Snapshot</button>
						<button type="submit" class="btn btn-primary" ng-bind="getSubmitButtonText()" toggle-on-submit></button>
						<span class="gray-text autosave-label" hidden></span>
						<a ng-href="{[{page.EditUrl}]}?ignoreMySaves=1" class="btn btn-danger pull-right" ng-show="!isModal && page.Type != 'answer'">Revert to Live Version</a>
						<button type="button" class="new-page-button btn btn-primary pull-right" ng-show="isModal && page.Type != 'question'" toggle-on-submit>New Page</button>
						<button type="button" class="abandon-page-button btn btn-danger pull-right" ng-show="page.Type == 'question' && !page.WasPublished" toggle-on-submit>Abandon</button>
						<div class="alert alert-danger" hidden></div>
						<span class="loading-text" style="display:none"></span>
						<div class="clearfix"></div>
						<div class="submit-form-error alert alert-danger" hidden></div>
					</div>
				</div>
			</div>
	
			<!-- Page options -->
			<div class="new-page-options form-horizontal">
				<!-- Page type -->
				<div class="form-group" ng-hide="page.WasPublished || page.Type=='question' || page.Type=='answer'">
					<label class="title-label control-label col-sm-2">Page Type</label>
					<div class="col-sm-4">
						<select ng-model="page.Type" required="string"
								name="type" class="type-select form-control"
								ng-options="type as label for (type,label) in pageTypes">
						</select>
					</div>
					<div class="type-help col-sm-6">
						<p class="type-help-blog help-block" ng-show="page.Type=='blog'">Blog page is used for writing your thoughts on some topic. Only you will be able to edit the page.</p>
						<p class="type-help-wiki help-block" ng-show="page.Type=='wiki'">Wiki page is a shared community page. Anyone can edit it.</p>
					</div>
				</div>
			
				<!-- Group id -->
				<div class="form-group" ng-show="groupOptionsLength > 0 && !page.WasPublished">
					<label class="title-label control-label col-sm-2">Group <span class="dashed-underline" title="Only members of the selected group will be able to see this page.">(?)</span></label>
					<div class="col-sm-4">
						<select ng-model="page.Group.Name"
								name="groupName" class="type-select form-control"
								ng-options="type as label for (type,label) in groupOptions">
							<option value="">-</option>
						</select>
					</div>
				</div>
			
				<!-- Show/hide vote -->
				<div class="form-group" ng-show="showVoteCheckbox && page.Type != 'question' && page.Type != 'answer'">
					<label class="title-label control-label col-sm-2">Show Vote</label>
					<div class="col-sm-8">
						<div class="checkbox">
							<label>
								<input type="checkbox" name="hasVoteStr" ng-checked="page.HasVote">
							</label>
						</div>
					</div>
				</div>
			
				<!-- Vote type -->
				<div class="form-group" ng-show="!showVoteCheckbox && page.Type != 'question' && page.Type != 'answer'">
					<label class="title-label control-label col-sm-2">Vote Type</label>
					<div class="col-sm-4">
						<select ng-model="page.VoteType"
								name="voteType" class="type-select form-control"
								ng-options="type as label for (type,label) in voteTypes">
						</select>
					</div>
				</div>
			
				<!-- Karma edit lock -->
				<div class="karma-lock-form-group form-group" ng-show="userService.user.getMaxKarmaLock() > 0 && page.Type != 'blog'">
					<label class="title-label control-label col-sm-2">Karma Lock
						<span title="Editing this page will require a minimum amount of karma." class="dashed-underline">(?)</span>
					</label>
					<div class="col-sm-4">
						<div class="karma-lock-slider" ng-value="page.KarmaLock" max="{[{userService.user.getMaxKarmaLock()}]}"></div>
					</div>
				</div>
			
				<!-- Privacy options -->
				<!-- <div class="form-group" {{if and (le .PrivacyKey 0) .WasPublished}}hidden{{end}}>
					<label class="control-label col-sm-2">
						Private
						<span title="This page will only be accessible by people who have the link." class="dashed-underline">(?)</span>
					</label>
					<div class="col-sm-8">
						<div class="checkbox">
							<label>
								<input type="checkbox" name="private" {{if gt .PrivacyKey 0}}checked{{end}}>
							</label>
						</div>
					</div>
				</div>-->
			
				<!-- Parents -->
				<div class="form-group">
					<label class="control-label col-sm-2">Parents</label>
					<div class="col-sm-4">
						<div class="input-group">
							<input type="text" class="tag-input form-control" placeholder="Enter new parent">
							<button type="button" class="btn btn-default btn-xs child-parent-option" ng-show="isModal && page.Type != 'question'">
								Make this page a sibling.
							</button>
						</div>
					</div>
					<div class="col-sm-6 parent-container">
						<a href="#" class="tag template label label-default" data-toggle="tooltip" title=""></a>
					</div>
				</div>
			
				<!-- Alias -->
				<div class="form-group" ng-hide="page.Type == 'answer'">
					<label class="control-label col-sm-2">Alias</label>
					<div class="col-sm-4">
						<div class="input-group">
							<input type="text"
									name="alias"
									placeholder='Optional alias, e.g. "HumanHealth"'
									class="form-control"
									ng-value="page.Alias">
						</div>
					</div>
				</div>
			
				<!-- Sort children option -->
				<div class="form-group" ng-show="page.Type != 'question' && page.Type != 'answer'">
					<label class="title-label control-label col-sm-2">Sort Children</label>
					<div class="col-sm-4">
						<select ng-model="page.SortChildrenBy"
								name="sortChildrenBy" class="sort-children-select form-control"
								ng-options="type as label for (type,label) in sortTypes">
						</select>
					</div>
				</div>
			</div>
		</div>
	
		<!-- Right half with the preview -->
		<div ng-class="{'half': !useVerticalView}">
			<div ng-class="{'panel':useVerticalView, 'panel-default':useVerticalView}">
				<div class="page-title" ng-class="{'panel-heading':useVerticalView}">
					<span class="page-title-text" ng-bind="page.Title"></span>
					<span class="gray-text" ng-show="useVerticalView">(Preview)<span>
				</div>
				<div ng-class="{'panel-body':useVerticalView}">
					<div id="wmd-preview{[{page.PageId}]}" class="wmd-preview pagedown"></div>
				</div>
			</div>
		</div>
	</div>
</form>
