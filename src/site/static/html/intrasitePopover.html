<div class="intrasite-popover md-whiteframe-8dp"
		layout="column">
	<md-toolbar>
		<div class="md-toolbar-tools">
			<arb-page-title page-id="{{page.pageId}}"></arb-page-title> 
		</div>
	</md-toolbar>

	<arb-vote-bar page-id="{{page.pageId}}" ng-if="page.hasVote && isLoaded(page.pageId)"></arb-vote-bar> 
	
	<!-- Lens tabs -->
	<md-tabs md-dynamic-height
			ng-class="{'hide-tabs': page.lensIds.length <= 1}">
		<md-tab ng-repeat="lensId in page.lensIds"
				md-on-select="tabSelect(lensId)">
			<md-tab-label>
				<arb-page-title page-id="{{lensId}}"
						custom-page-title="{{lensId === page.pageId ? 'Primary' : ''}}"></arb-page-title>
				<md-icon>done</md-icon>
			</md-tab-label>
			<md-tab-body>
				<!-- Lens body -->
				<div ng-if="isLoaded(lensId)">
					<arb-markdown page-id="{{lensId}}" use-summary="true"></arb-markdown>

					<!-- Footer -->
					<div layout="row" layout-align="start center" ng-if="isLoaded(lensId)">
						<arb-likes page-id="{{lensId}}" is-button="true"></arb-likes>
						<arb-subscribe page-id="{{lensId}}" ng-hide="parentSubpageId"></arb-subscribe>
						<div ng-show="page.commentCount">
							<md-icon>comment</md-icon>
							<span ng-bind="page.commentCount"></span>
						</div>
						<div flex></div>
						<div ng-show="page.type !== 'question'">
							{{page.textLength}} characters
						</div>
						<div ng-show="page.type === 'question'">
							<md-icon>font_download</md-icon>
							<span ng-bind="page.answerCount"></span>
						</div>
					</div>
				</div>

				<!-- Loading spinner -->
				<div layout="column"
						layout-align="center center"
						ng-if="!isLoaded(lensId)">
					<md-progress-circular md-mode="indeterminate"></md-progress-circular>
				</div>
			</md-tab-body>
		</md-tab>
	</md-tabs>
</div>
