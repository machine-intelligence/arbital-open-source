<!-- Top toolbar appearing on every page -->
<md-toolbar>
	<div class="md-toolbar-tools">
		<a ng-href="{{pageService.getDomainUrl()}}">Arbital</a>

		<span flex="5"></span>

		<a ng-href="/"
				ng-bind="pageService.pageMap[pageService.privateGroupId].title"
				ng-show="pageService.privateGroupId"></a>

		<span flex="5"></span>

		<!-- Search -->
		<arb-autocomplete autofocus="true"
				placeholder="Search"
				on-select="searchResultSelected(result)"
				flex="80"></arb-autocomplete>

		<span flex="10"></span>

		<!-- Updates -->
		<md-button class="md-icon-button" ng-show="userService.user.isLoggedIn">
			<md-icon ng-show="userService.user.updateCount <= 0">notifications_none</md-icon>
			<md-icon ng-show="userService.user.updateCount > 0">notifications</md-icon>
			<span ng-bind="userService.user.updateCount" ng-show="userService.user.updateCount > 0"></span>
		</md-button>

		<!-- Login/signup buttons -->
		<md-button ng-href="/signup/?continueUrl={{currentUrl}}"
				ng-hide="userService.user.isLoggedIn">
			Sign Up
		</md-button>
		<md-button ng-href="/login/?continueUrl={{currentUrl}}"
				target="_self"
				ng-hide="userService.user.isLoggedIn">
			Log In
		</md-button>

		<!-- Button for RHS sidebar -->
		<md-button class="md-icon-button"
				ng-click="toggleRightMenu()"
				ng-show="userService.user.isLoggedIn">
			<md-icon>menu</md-icon>
    </md-button>
	</div>
</md-toolbar>

<!-- Right sidenav slide out; only if the user is logged in -->
<md-sidenav class="md-sidenav-right md-whiteframe-6dp" md-component-id="right">
	<md-toolbar>
		<h1 class="md-toolbar-tools">
			{{userService.user.email}}
			<md-button class="md-icon-button"
					ng-click="toggleRightMenu()">
				<md-icon>arrow_forward</md-icon>
			</md-button>
		</h1>
	</md-toolbar>
	<md-content layout="column">
		<!-- List of groups -->
		<md-subheader ng-show="userService.user.groupIds.length > 0">
			My Groups
		</md-subheader>
		<div ng-repeat="groupId in userService.user.groupIds"
			ng-init="groupAlias=pageService.pageMap[groupId].alias">
			<md-button ng-href="{{pageService.getDomainUrl(groupAlias)}}" ng-bind="groupAlias"></md-button>
		</div>
		<md-divider></md-divider>

		<!-- Other buttons -->
		<md-button ng-href="{{userService.getUserUrl(userService.user.id)}}" ng-click="toggleRightMenu()">
			My Profile
		</md-button>
		<md-button ng-href="/groups" ng-click="toggleRightMenu()">My Groups</md-button>
		<md-button ng-href="/settings" ng-click="toggleRightMenu()">My Settings</md-button>
		<md-divider></md-divider>

		<md-button ng-href="/logout/?continueUrl={{currentUrl}}"
				id="logout"
				target="_self">Log Out</md-button>
	</md-content>
</md-sidenav>
