<div id="subpage-{{page.pageId}}" layout="{{isSingleColumn ? 'column' : 'row'}}">
	<!-- Primary column -->
	<div ng-class="{'selected-subpage': isSelected()}"
			layout="column"
			flex-order="1"
			flex>
		<!-- Parents -->
		<div flex-order="{{isTinyScreen ? 1 : 0}}"
				layout-margin
				ng-show="page.parentIds.length > 0">
			<div>
				<span>Parents:</span>
				<span ng-repeat="(index, parentId) in page.parentIds">
					<span ng-show="index > 0">,</span>
					<arb-page-title page-id="{{parentId}}" is-link="true"></arb-page-title>
				</span>
			</div>
		</div>

		<!-- Hash anchor -->
		<a id="page-{{page.pageId}}"></a>

		<!-- Page title -->
		<h1 ng-class="{'md-display-3': page.type !== 'answer', 'md-display-2': page.type === 'answer', 'center-text': isTinyScreen}"
				layout-padding>
			<arb-page-title page-id="{{page.pageId}}"
					show-type="true"
					custom-page-title="getPageTitle()"></arb-page-title>
		</h1>

		<!-- Tags -->
		<div flex-order="{{isTinyScreen ? 1 : 0}}"
				layout-margin
				ng-show="page.taggedAsIds.length > 0">
			<div>
				<span>Tagged as:</span>
				<span ng-repeat="(index, tagId) in page.taggedAsIds">
					<span ng-show="index > 0">,</span>
					<arb-page-title page-id="{{tagId}}" is-link="true"></arb-page-title>
				</span>
			</div>
		</div>

		<!-- Voting container -->
		<arb-vote-bar page-id="{{page.pageId}}" ng-if="page.hasVote"></arb-vote-bar>

		<!-- Lens tabs -->
		<md-tabs md-dynamic-height
				class="md-primary md-hue-2"
				ng-class="{'hide-tabs': page.lensIds.length <= 1}"
				ng-click="tabsClicked($event)"
				md-selected="selectedLensIndex">
			<md-tab ng-repeat="lensId in page.lensIds"
					md-on-select="tabSelect(lensId)">
				<md-tab-label>
					<arb-page-title page-id="{{lensId}}"
							custom-page-title="lensId === page.pageId ? 'Primary' : ''"></arb-page-title>
					<md-icon ng-show="hasMastery(lensId)">assignment_turned_in</md-icon>
					<md-icon ng-show="!hasMastery(lensId)">assignment_late</md-icon>
				</md-tab-label>
				<md-tab-body>
					<div ng-style="{'min-height': 500}"
							layout="column"
							layout-align="center center"
							ng-if="!isLoaded(lensId)">
						<md-progress-circular md-mode="indeterminate"></md-progress-circular>
					</div>
					<arb-lens class="reveal-after-render"
							page-id="{{lensId}}"
							lens-parent-id="{{page.pageId}}"
							ng-if="isLoaded(lensId)"></arb-lens>
				</md-tab-body>
			</md-tab>
		</md-tabs>
	</div>
</div>
